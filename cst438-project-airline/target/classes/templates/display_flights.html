<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flights</title>
	<link th:href="@{/css/main.css}" rel="stylesheet" />
</head>
<body>
	<nav>
		<ul class="nav-ul">
			<li class="nav-li"><a href="/">Home</a></li>
			<li class="nav-li"><a href="/searchFlights">Search Flights</a></li>
			<li class="nav-li"><a href="/reservations">See Reservations</a></li>
			<li class="nav-li"><a href="/login">Login</a></li>
		</ul>
	</nav>
	<div id="content">

		<table id="flights-table">
			<tr>
				<th>Airline</th>
				<th>Origin</th>
				<th>Destination</th>
				<th>Departure Date</th>
				<th>Departure Time</th>
			</tr>
			<tr class="flight-row" th:each="flight : ${flights}" th:id="${flight.flightId}">
				<td th:text="${flight.airlineName}"></td>
				<td th:text="${flight.originCity}"></td>
				<td th:text="${flight.destinationCity}"></td>
				<td th:text="${#dates.format(flight.departureDate, 'E, MM-dd-yy')}"></td>
				<td th:text="${#dates.format(flight.departureTime, 'h:mm aa z')}"></td>
				<td><input type="button" value="Book" onclick="book()" /></td>
			</tr>
		</table>

	</div>
	<!-- Scripts -->	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script>
	    function book() {
	        const flight_id = event.target.parentNode.parentNode.id;
	        alert("Flight ID: " + flight_id );

			$.ajax({
				method: "GET",
				url: "/api/getSeats",
				data: {
					"flightId": flight_id
				}
			})
	        
		    }


	</script>
</body>
</html>